<!doctype html>
<html lang="en">
  <head>
    <!--Script before iniital page load-->
      <script src="./js/preScript.js" defer></script>
      

      <!-- Bootstrap and Jquery CDN -->
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

      <!-- Firebase CDN -->
      <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase.js"></script>
      <script src="https://cdn.firebase.com/libs/firebaseui/3.4.1/firebaseui.js"></script>
      <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.4.1/firebaseui.css" />
        
      <!-- Custom Css tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <link rel="stylesheet" href="css/index.css">
      <script src="js/dbConnect.js"></script>
      <title>Give Back</title>
      
      <!-- Google CDN from fonts and Icons -->
      <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons"  rel="stylesheet">

      <!-- Google Charts CDN -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>

      <!-- PNotify scripts CDN -->
      <script type="text/javascript" src="js/pnotify.custom.min.js"></script>
      <link href="css/pnotify.custom.min.css" media="all" rel="stylesheet" type="text/css" />

  </head>
<body class="headerGradient">
        <nav class="navbar" style="z-index: 1;">
          <a class="navbar-brand" id="siteLogo" href="index.html" style="padding:0px;">
            <img src="image/logo.svg" style="height:40px; width:100px;">
          </a>
          <a class="navbar-brand textNavbar" href="distribution.html">
            <span id="testButton">Distribution</span>
          </a>
          <a class="navbar-brand textNavbar" href="contact.html">
            <span>Contact Us</span>
          </a>
          <a class="navbar-brand textNavbar" href="donations.html">
              <span>Donators</span>
          </a>
          <a id="helpUs" class="navbar-brand" href="DonateForUs.html" style="color:black;background:white">
              <span>Help Us</span>
          </a>
        </nav>
        <section id="donationSummary" style="text-align:center">
            <div style="margin-top: 4%;padding: 10px;width:100%" class="card card-2 container">
                <h1 style="font-size:18px;text-align:center">Donation Summary</h1>
                <div class="row">
                    
                    <div class="col-lg-6 col-md-6" style="min-height: 400px;border-radius: 25%;border: 1px solid black;text-align: left">
                        <h1 style="font-size:16px;color:#00c12d;text-align:center;margin-top:40px;">Thank you for DONATING !</h1>
                        <hr style="width:50%;">
                        <p style="width:80%;margin-left:20%;margin-top:40px;font-size: 14px;">
                         This is a list of all things you donated.
                          We are gratefull for your donation and rest be assured , it will reach the right person.
                           You can note the Unique ID for your reference if you want to check the status of your donation in future.
                            Thank you once again . We really appreciate your help . </p>
                        <div style="width:80%;margin-left:20%;margin-top:40px;">
                            <p style="margin-bottom:0px;">
                            <label style="font-size:14px;color:#00c12d">Contribution :</label>
                            <label class="contributionType"></label>
                            </p>
                            <p style="margin-bottom:0px;">
                                <label  style="font-size:14px;color:#00c12d">Quantity: </label>
                                <label class="contributionQuantity"></label>
                            </p>
                            <p style="margin-bottom:0px;">
                                <label style="font-size:14px;color:#00c12d">Description: </label>
                                <label class="contributionDescription"></label>
                            </p>
                            <p style="margin-bottom:0px;">
                                <label style="font-size:14px;color:#00c12d">Unique ID: </label>
                                <label class="contributionID"></label>
                            </p>
                        </div>
                    </div>
                    <div class="col-md-1 col-lg-1">
                        <hr style="width:1px;height:400px;background:black;">
                    </div>
                    <div class="col-md-5 col-lg-5 " style="min-height: 400px;border-radius: 25%;border: 1px solid black;text-align: left">
                    <div style="color:#00c12d;margin:80px 0px 0px 40px" class="donarInfo">
                    </div>
                    <div style="background:#fee994;margin:0px 40px 0px 40px;border-radius: 10px;">
                        <p style="font-size:14px;padding:10px;">Your donation will be picked up on <span id="pick-up-date"></span> (Coming Sunday).Thank you for your patience.</p>
                    </div>
                    <div>
                        <p style="margin:190px 40px 0px 40px;text-align:center;opacity: 0.7;">
                        <label>
                            <span class="material-icons" style="vertical-align:middle">email</span>
                            <label style="font-size:12px;">Email Receipt</label>
                        </label>
                        <label style="margin-left:10px;">
                            <span class="material-icons" style="vertical-align:middle">contact_support</span>
                            <label  style="font-size:12px;">Contact Us</label>
                        </label>
                        <label style="margin-left:10px;">
                            <span class="material-icons" style="vertical-align:middle">print</span>
                            <label  style="font-size:12px;">Print</label>
                        </label>
                        </p>
                    </div>
                    </div>
                </div>
            </div>
        </section>
</body>
<script>
    $(document).ready(function(){

        function comingSunday(){
            let date = new Date();
            let day = date.getDay();
            date.setDate(date.getDate() + (7-day)); 
            let dd = date.getDate();
            let mm = date.getMonth() + 1;
            let y = date.getFullYear();
            let completeDate = dd + '/'+ mm + '/'+ y;
            return completeDate;
        }
        let searchParams =  new URLSearchParams(window.location.search);
        let donationID = searchParams.get("id");
        let collection = searchParams.get("type");
        let date = comingSunday();
        $("#pick-up-date").text(date);

        function dataAppend(name,type,quantity,description,ID){
            $(".donarInfo").append(name);
            $(".contributionType").append(type);
            $(".contributionQuantity").append(quantity);
            $(".contributionDescription").append(description);
            $(".contributionID").append(ID);
        }

        db.collection(collection).doc(donationID).get().then(function(res){
            var data = res.data();
            if(data.User)
            {
                let name = `<p style="font-size:16px;margin:0px;" class="donarName">${data.User.Name}</p>`;
                let address = `<p style="font-size:14px;" class="donarAddress">${data.User.Address}</p>`;
                let type = `${data.Type}`;
                let quantity = `${data.Quantity}`;
                let description = `${data.Description}`;
                let ID = donationID;
                dataAppend(name,type,quantity,description,ID);
                $(".donarInfo").append(address);
            }
            else
            {
                let name = `<p style="font-size:16px;margin:0px;" class="donarName">${data.Name}</p>`;
                let address = `<p style="font-size:14px;" class="donarAddress">You will have to come at the location for it .</p>`;
                if(data.DonationType == 7)
                {
                    var type = "Blood";
                    var description = `${data.Blood_Group}`;
                    var quantity = "Not more than 400ml";
                }
                let ID = donationID;
                dataAppend(name,type,quantity,description,ID);
            }
            
            
        });
    });
</script>
</html>